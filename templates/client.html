<!--
  ~ Copyright (c) 2020 EdisonWeb.
  ~ @author Developer From Jokela
  -->

<section layout="row" flex="" style="background-color: #E1E2E1;">


    <md-content flex="" >
        <md-progress-linear md-mode="indeterminate" md-theme="progress" ng-show="!cardsLoaded || offlineMode"></md-progress-linear>
        <md-toolbar>
            <div class="md-toolbar-tools">

                <h2 flex="">Edison</h2>
                <div md-truncate=""></div>

                <md-menu>
                    <md-button aria-label="Menu" class="md-icon-button" ng-click="$mdMenu.open($event);">
                        <md-icon md-svg-icon="img/icons/more_vert.svg"></md-icon>
                    </md-button>
                    <md-menu-content width="4">
                        <md-menu-item>
                            <md-button ng-click="logout()">
                                <md-icon md-font-set="md">exit_to_app</md-icon>
                                {{'logout' | translate}}
                            </md-button>
                        </md-menu-item>
                        <md-menu-divider></md-menu-divider>
                        <md-menu-item>
                            <md-button ng-click="openAbout()">
                                <md-icon md-font-set="md">info</md-icon>
                                {{'about' | translate}}
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
        </md-toolbar>
        <style>
            .grid-container {
                display: grid;

            }

            .grid-container--fill {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

        </style>
        <md-tabs md-dynamic-height style="background-color: white" ng-show="cardsLoaded">
            <md-tab label="{{page.title}}" ng-repeat="page in pages" data-page-id="{{page.id}}">
                <md-content class="md-padding" flex ng-cloak>
                    <div class="grid-container grid-container--fill" style="grid-auto-rows: 1fr">
                        <md-card class="grid-element" md-ink-ripple ng-click="openCard(card)"
                                 ng-repeat="card in page.cards"
                                 style="cursor: pointer; width: 100px; border-radius: 4px 4px 4px 4px; text-align: center; position: relative;"
                                 tabindex="0">

                            <md-card-content layout-align="center center">
                                <div class="md-media-lg card-media"><img src="{{getThumbnail(card)}}"
                                                                         style="max-width: 50px; user-select: none; object-fit: cover;">
                                </div>
                                <span class="md-body-1"
                                      style="text-overflow: clip; overflow: hidden; word-break: break-word;">{{getCard(card).translated_title}}</span>
                            </md-card-content>
                            <div flex=""></div>
                            <div style="height: 6px; border-radius: 0 0 4px 4px; background-color: {{ edisonColorToCode(getCard(card).category.color || 'grey') }}"></div>
                            </md-card>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label="{{'all_cards' | translate}}">
                <md-content class="md-padding" md-flex>

                </md-content>
            </md-tab>
        </md-tabs>

    </md-content>


</section>